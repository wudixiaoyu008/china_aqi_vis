import urllib.request
import json


city_aqi_dict = {
   "Beijing":134.55492779297327,
   "Tianjin":121.08235889596199,
   "Shijiazhuang":170.55575386073158,
   "Tangshan":136.7150409626216,
   "Qinhuangdao":98.79166739399675,
   "Handan":151.06275757828874,
   "Xingtai":175.21882594756622,
   "Baoding":172.00884832013864,
   "Zhangjiakou":84.63340512563006,
   "Chengde":99.36962174447656,
   "Cangzhou":126.19826672455518,
   "Langfang":138.1054390477277,
   "Hengshui":151.78459913742174,
   "Taiyuan":109.62345506980678,
   "Datong":81.3768527046001,
   "Yangquan":116.42716824486847,
   "Changzhi":99.03221629030168,
   "Jincheng":99.03221629030168,
   "Shuozhou":99.03221629030168,
   "Jinzhong":99.03221629030168,
   "Yuncheng":99.03221629030168,
   "Xinzhou":99.03221629030168,
   "Linfen":93.9329995279695,
   "Lvliang":93.9329995279695,
   "Hohhot":92.29664198001426,
   "Baotou":105.24478068665358,
   "Wuhai":105.24478068665358,
   "Chifeng":90.81680059834629,
   "Tongliao":90.81680059834629,
   "Erdos":80.78228643477111,
   "Hulunbuir":80.78228643477111,
   "Bayannur":80.78228643477111,
   "Ulanqab":80.78228643477111,
   "Shenyang":111.79135485183872,
   "Dalian":86.56316399568404,
   "Anshan":106.17491482531806,
   "Fushun":96.37466468493535,
   "Benxi":87.12996946063316,
   "Dandong":80.31339729236282,
   "Jinzhou":100.87884109369325,
   "Yingkou":86.48289398972965,
   "Fuxin":86.48289398972965,
   "Liaoyang":86.48289398972965,
   "Panjin":96.02189894648728,
   "Tiding":96.02189894648728,
   "Chaoyang":96.02189894648728,
   "Huludao":94.69324821808875,
   "Changchun":101.35259424372096,
   "Jilin":101.35259424372096,
   "Siping":101.35259424372096,
   "Liaoyuan":101.35259424372096,
   "Tonghua":101.35259424372096,
   "Baishan":101.35259424372096,
   "Songyuan":101.35259424372096,
   "Baicheng":101.35259424372096,
   "Harbin":112.1195272544063,
   "Qiqihar":79.54447061712088,
   "Jixi":79.54447061712088,
   "Hegang":79.54447061712088,
   "Shuangyashan":79.54447061712088,
   "Daqing":84.38462436256553,
   "Yichun":79.51592693199673,
   "Jiamusi":84.38462436256553,
   "Qitaihe":84.38462436256553,
   "Mudanjiang":90.1285786835333,
   "Heihe":90.1285786835333,
   "Suihua":90.1285786835333,
   "Shanghai":88.09388698658752,
   "Nanjing":109.44936053286722,
   "Wuxi":103.3521304535904,
   "Xuzhou":102.2467920162275,
   "Changzhou":100.71648994424532,
   "Suzhou":97.98438637450776,
   "Nantong":95.26653116397739,
   "Lianyungang":100.92084929791268,
   "Huai'an":107.97997883701716,
   "Yancheng":93.26825437423082,
   "Yangzhou":96.04212886644235,
   "Zhenjiang":101.096887260095,
   "Taizhou":81.25022897969812,
   "Suqian":101.87837566431837,
   "Hangzhou":97.21442456329045,
   "Ningbo":82.10346729420006,
   "Wenzhou":81.47945730411804,
   "Jiaxing":95.60261430872988,
   "Huzhou":100.35718250257872,
   "Shaoxing":99.81173844839367,
   "Jinhua":98.86640052028976,
   "Quzhou":87.67200743201572,
   "Zhoushan":74.38501699405208,
   "Lishui":79.94052319655431,
   "Hefei":111.6299692014149,
   "Bengbu":94.77008530359394,
   "Huainan":94.77008530359394,
   "Maanshan":97.98438637450776,
   "Huaibei":97.98438637450776,
   "Tongling":97.98438637450776,
   "Anqing":97.98438637450776,
   "Huangshan":97.98438637450776,
   "Chuzhou":97.98438637450776,
   "Fuyang":97.98438637450776,
   "Lu'an":97.98438637450776,
   "Bozhou":97.98438637450776,
   "Chizhou":97.98438637450776,
   "Xuancheng":97.98438637450776,
   "Fuzhou":79.51592693199673,
   "Xiamen":71.45863791562404,
   "Putian":71.45863791562404,
   "Sanming":71.45863791562404,
   "Quanzhou":69.63018109884233,
   "Zhangzhou":69.63018109884233,
   "Nanping":69.63018109884233,
   "Longyan":69.63018109884233,
   "Ningde":69.63018109884233,
   "Nanchang":83.84974679327003,
   "Jingdezhen":83.84974679327003,
   "Pingxiang":83.84974679327003,
   "Jiujiang":79.51592693199673,
   "Xinyu":79.51592693199673,
   "Yingtan":79.51592693199673,
   "Ganzhou":79.51592693199673,
   "Jiâ€™an":79.51592693199673,
   "Shangrao":79.51592693199673,
   "Jinan":132.6163131671196,
   "Qingdao":94.2349040719508,
   "Zibo":134.03350159449994,
   "Zaozhuang":129.7206449711455,
   "Dongying":127.08882214806574,
   "Yantai":90.84672779245007,
   "Weifang":125.3319794005278,
   "Jining":126.19403481822833,
   "Tai'an":111.64801581453882,
   "Weihai":88.59609621151607,
   "Rizhao":100.18782002238704,
   "Laiwu":129.39961179902784,
   "Linyi":132.83894083539056,
   "Dezhou":138.38210293050858,
   "Liaocheng":133.76448658868017,
   "Binzhou":121.78298923067418,
   "Heze":136.9428861908701,
   "Zhengzhou":122.4364205189474,
   "Kaifeng":117.78603796478518,
   "Luoyang":109.31821827936189,
   "Pingdingshan":122.46137253983193,
   "Anyang":129.83534207727757,
   "Hebi":129.83534207727757,
   "Xinxiang":129.83534207727757,
   "Jiaozuo":117.60700140809013,
   "Puyang":117.60700140809013,
   "Xuchang":117.60700140809013,
   "Luohe":117.60700140809013,
   "Sanmenxia":114.28350295267701,
   "Nanyang":114.28350295267701,
   "Shangqiu":114.28350295267701,
   "Xinyang":114.28350295267701,
   "Zhoukou":114.28350295267701,
   "Zhumadian":114.28350295267701,
   "Wuhan":119.08019893220114,
   "Huangshi":119.08019893220114,
   "Shiyan":119.08019893220114,
   "Yichang":125.24302630494792,
   "Xiangyang":125.24302630494792,
   "Ezhou":125.24302630494792,
   "Jingmen":125.24302630494792,
   "Xiaogan":125.24302630494792,
   "Jingzhou":121.1252069047008,
   "Huanggang":121.1252069047008,
   "Xianning":121.1252069047008,
   "Suizhou":121.1252069047008,
   "Changsha":105.90970552835562,
   "Zhuzhou":102.46211279342505,
   "Xiangtan":100.11129573831187,
   "Hengyang":100.11129573831187,
   "Shaoyang":100.11129573831187,
   "Yueyang":95.07717051604241,
   "Changde":101.13403710507622,
   "Zhangjiajie":98.80724774151626,
   "Yiyang":98.80724774151626,
   "Chenzhou":98.80724774151626,
   "Yongzhou":98.80724774151626,
   "Huaihua":98.80724774151626,
   "Loudi":98.80724774151626,
   "Guangzhou":88.54836831796325,
   "Shaoguan":86.59797985419772,
   "Shenzhen":66.70753218732314,
   "Zhuhai":76.82892246993292,
   "Shantou":74.66320923327558,
   "Foshan":88.17167008657206,
   "Jiangmen":83.95401493000178,
   "Zhanjiang":83.95401493000178,
   "Maoming":76.80617557184478,
   "Zhaoqing":92.95421843493374,
   "Huizhou":79.09997433988994,
   "Meizhou":74.74997387554048,
   "Shanwei":77.61723524633472,
   "Heyuan":76.579488606309,
   "Yangjiang":76.54567952884777,
   "Qingyuan":81.68881939083745,
   "Chaozhou":86.6585236948715,
   "Jieyang":85.40742617687074,
   "YunfU":75.3807578277406,
   "Nanning":81.5257973639156,
   "Liuzhou":98.46566791041018,
   "Guilin":100.09579516928392,
   "Wuzhou":100.09579516928392,
   "Beihai":74.35186483319548,
   "Fangchenggang":74.35186483319548,
   "Qinzhou":74.35186483319548,
   "Guigang":74.35186483319548,
   "Yulin":94.96165937981685,
   "Baise":74.35186483319548,
   "Hezhou":74.35186483319548,
   "Hechi":74.35186483319548,
   "Laibin":74.35186483319548,
   "Chongzuo":74.35186483319548,
   "Haikou":74.35186483319548,
   "Chongqing":101.91634856630826,
   "Chengdu":110.16766009116537,
   "Zigong":104.16137993623813,
   "Panzhihua":68.85963422606451,
   "Luzhou":99.32536713427385,
   "Deyang":97.35859838310525,
   "Mianyang":88.5768631783791,
   "Guangyuan":88.5768631783791,
   "Suining":88.5768631783791,
   "Neijiang":88.5768631783791,
   "Leshan":88.5768631783791,
   "Nanchong":101.11145988768301,
   "Meishan":101.11145988768301,
   "Yibin":100.62314497913509,
   "Guang'an":100.62314497913509,
   "Dazhou":100.62314497913509,
   "Ya'an":100.62314497913509,
   "Bazhong":100.62314497913509,
   "Ziyang":100.62314497913509,
   "Guiyang":77.83147814919637,
   "Liupanshui":77.83147814919637,
   "Zunyi":84.79253373812006,
   "Anshun":84.79253373812006,
   "Kunming":64.51211575660501,
   "Qujing":69.26760202909396,
   "Yuxi":61.88895622351506,
   "Baoshan":61.88895622351506,
   "Zhaotong":61.88895622351506,
   "Lijiang":61.88895622351506,
   "Pu'er":61.88895622351506,
   "Lincang":61.88895622351506,
   "Lasa":66.97078623505787,
   "Xi'an":66.97078623505787,
   "Tongchuan":108.90280262902343,
   "Baoji":109.16187188930282,
   "Xianyang":110.27046886311065,
   "Weinan":111.52771991377386,
   "Yan'an":94.96165937981685,
   "Hanzhong":94.96165937981685,
   "Ankang":94.96165937981685,
   "Shangluo":94.96165937981685,
   "Lanzhou":97.25496310738247,
   "Baiyin":94.56672637552782,
   "Tianshui":94.56672637552782,
   "Wuwei":94.56672637552782,
   "Zhangye":94.56672637552782,
   "Pingliang":94.56672637552782,
   "Jiuquan":94.56672637552782,
   "Qingyang":94.56672637552782,
   "Dingxi":94.56672637552782,
   "Longnan":94.56672637552782,
   "Xining":94.93522484584311,
   "Yinchuan":91.07945568675547,
   "Shizuishan":101.26153848794746,
   "Wuzhong":101.26153848794746,
   "Guyuan":101.26153848794746,
   "Zhongwei":101.26153848794746,
   "Urumqi":112.77773622604684,
   "Karamay":77.39061675455979
}

aqi_json = []

city_arr = list(city_aqi_dict.keys())

for city in city_arr:
	cityaqi = int(city_aqi_dict[city])

	mykey = '&'+ "AIzaSyC2QTzES4tm_-Jlvz5v1qpyy2SXfOWZIJI"
	base = 'https://maps.googleapis.com/maps/api/geocode/json?address='
	source = base+city+mykey
	source = source.encode('ascii', 'ignore').decode('ascii')

	x = urllib.request.urlopen(source)
	raw_data = x.read()
	encoding = x.info().get_content_charset('utf8')
	data = json.loads(raw_data.decode(encoding))	

	if data['results']:
		city_data = {}
		lat = data['results'][0]['geometry']['location']['lat']
		lng = data['results'][0]['geometry']['location']['lng']

		city_data['name'] = city
		city_data['value'] = [lng, lat, cityaqi]
		print (city_data)

		aqi_json.append(city_data)

print (aqi_json)
with open('full_city_aqi.json','w') as f:
    f.write(json.dumps(aqi_json))

